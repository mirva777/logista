<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Database Entry Form</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        padding: 20px;
        line-height: 1.6;
    }

    h1 {
        color: #333;
    }

    form {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    label {
        margin-top: 20px;
        margin-bottom: 5px;
        display: block;
        color: #333;
    }
    input[type="text"] {
    position: relative;
    }

    .clearable {
    background: #fff url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="none" stroke="%23000" stroke-width="2" d="M3,3 L21,21 M3,21 L21,3"/></svg>') no-repeat right 14px center;
    padding-right: 30px;
    cursor: pointer;
    }

    input[type="text"],
    input[type="number"],
    input[type="email"],
    select,
    textarea {
        width: 100%;
        padding: 12px;
        margin-bottom: 20px;
        border-radius: 5px;
        border: 1px solid #ddd;
        box-sizing: border-box;
    }

    input[type="submit"] {
        width: 100%; /* Easier to tap on mobile */
        background-color: #0056b3;
        color: #ffffff;
        border: none;
        padding: 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }
    .error-message {
    color: red;
    font-size: 12px;
    display: none;
    }
    input[type="submit"]:hover {
        background-color: #004494;
    }
    @media (max-width: 768px) {
        form {
            padding: 15px;
            overflow-anchor: auto;
        }
        input {
                font-size: 18px;
                padding: 16px;
            }
        input[type="text"],
        input[type="number"],
        textarea {
        font-size: 16px; /* Set font size to at least 16px to prevent zoom */
        }
        .form-container {
        overflow-anchor: auto; 
        }
    }
</style>
</head>
<body>

<h1>Введите сообщение в базу данных</h1>


<form action="" method="post">
    <label for="fromDropdown">Из какой страны</label>
    <input list="fromcountryList" id="fromDropdown" name="from" class="clearable">
    <span id="fromCountryError" class="error-message"></span>
    <datalist id="fromcountryList">
        <option value="🇰🇿Казахстан🇰🇿">
        <option value="🇷🇺Россия🇷🇺">
        <option value="🇩🇪Германия🇩🇪">
        <option value="🇺🇦Украина🇺🇦">
        <option value="🇦🇲Армения🇦🇲">
        <option value="🇹🇷Турция🇹🇷">
        <option value="🇨🇳Китай🇨🇳">
        <option value="🇦🇿Азербайджан🇦🇿">
        <option value="🇫🇷Франция🇫🇷">
        <option value="🇮🇹Италия🇮🇹">
        <option value="🇺🇿Узбекистан🇺🇿">
        <option value="🇹🇯Таджикистан🇹🇯">
        <option value="🇰🇬Киргизия🇰🇬">
        <option value="🇹🇲Туркмения🇹🇲">
        <option value="🇬🇪Грузия🇬🇪">
        <option value="🇵🇱Польша🇵🇱">
        <option value="🇧🇾Беларусь🇧🇾">
        <option value="🇲🇩Молдова🇲🇩">
        <option value="🇬🇧Великобритания🇬🇧">
        <option value="🇳🇱Нидерланды🇳🇱">
        <option value="🇪🇸Испания🇪🇸">
        <option value="🇱🇹Литва🇱🇹">
        <option value="🇱🇻Латвия🇱🇻">
        <option value="🇪🇪Эстония🇪🇪">
    </datalist>

    <label for="fromcityInput">Выберите город</label>
    <input list="fromcityList" id="fromcityInput" name="city_from" class="clearable">
    <span id="fromCityError" class="error-message"></span>
    <datalist id="fromcityList"></datalist>

    <label for="toDropdown">В какую страну</label>
    <input list="tocountryList" id="toDropdown" name="to" class="clearable">
    <span id="toCountryError" class="error-message"></span>
    <datalist id="tocountryList">
        <option value="🇰🇿Казахстан🇰🇿">
        <option value="🇷🇺Россия🇷🇺">
        <option value="🇩🇪Германия🇩🇪">
        <option value="🇺🇦Украина🇺🇦">
        <option value="🇦🇲Армения🇦🇲">
        <option value="🇹🇷Турция🇹🇷">
        <option value="🇨🇳Китай🇨🇳">
        <option value="🇦🇿Азербайджан🇦🇿">
        <option value="🇫🇷Франция🇫🇷">
        <option value="🇮🇹Италия🇮🇹">
        <option value="🇺🇿Узбекистан🇺🇿">
        <option value="🇹🇯Таджикистан🇹Ј">
        <option value="🇰🇬Киргизия🇰🇬">
        <option value="🇹🇲Туркмения🇹🇲">
        <option value="🇬🇪Грузия🇬🇪">
        <option value="🇵🇱Польша🇵🇱">
        <option value="🇧🇾Беларусь🇧🇾">
        <option value="🇲🇩Молдова🇲🇩">
        <option value="🇬🇧Великобритания🇬🇧">
        <option value="🇳🇱Нидерланды🇳🇱">
        <option value="🇪🇸Испания🇪🇸">
        <option value="🇱🇹Литва🇱🇹">
        <option value="🇱🇻Латвия🇱🇻">
        <option value="🇪🇪Эстония🇪🇪">
    </datalist>

    <label for="tocityInput">Выберите город</label>
    <input list="tocityList" id="tocityInput" name="city_to" class="clearable">
    <span id="toCityError" class="error-message"></span>
    <datalist id="tocityList"></datalist>

    <script>





        const fromDropdown = document.getElementById('fromDropdown');
        const fromcityList = document.getElementById('fromcityList');
        const toDropdown = document.getElementById('toDropdown');
        const tocityList = document.getElementById('tocityList');

        const citiesByCountry = {
            "🇰🇿Казахстан🇰🇿": ["Нур-Султан", "Алматы", "Шымкент"],
            "🇷🇺Россия🇷🇺": ["Москва", "Санкт-Петербург", "Новосибирск"],
            "🇩🇪Германия🇩🇪": ["Берлин", "Мюнхен", "Франкфурт"],
            "🇺🇦Украина🇺🇦": ["Киев", "Харьков", "Одесса"],
            "🇦🇲Армения🇦🇲": ["Ереван", "Гюмри", "Ванадзор"],
            "🇹🇷Турция🇹🇷": ["Стамбул", "Анкара", "Измир"],
            "🇨🇳Китай🇨🇳": ["Пекин", "Шанхай", "Гуанчжоу"],
            "🇦🇿Азербайджан🇦🇿": ["Баку", "Гянджа", "Сумгаит"],
            "🇫🇷Франция🇫🇷": ["Париж", "Марсель", "Лион"],
            "🇮🇹Италия🇮🇹": ["Рим", "Милан", "Неаполь"],
            "🇺🇿Узбекистан🇺🇿": ["Ташкент", "Самарканд", "Бухара"],
            "🇹🇯Таджикистан🇹Ј": ["Душанбе", "Худжанд", "Бохтар"],
            "🇰🇬Киргизия🇰🇬": ["Бишкек", "Ош", "Джалал-Абад"],
            "🇹🇲Туркмения🇹🇲": ["Ашхабад", "Туркменабад", "Дашогуз"],
            "🇬🇪Грузия🇬🇪": ["Тбилиси", "Батуми", "Кутаиси"],
            "🇵🇱Польша🇵🇱": ["Варшава", "Краков", "Лодзь"],
            "🇧🇾Беларусь🇧🇾": ["Минск", "Гомель", "Могилёв"],
            "🇲🇩Молдова🇲🇩": ["Кишинёв", "Тирасполь", "Бельцы"],
            "🇬🇧Великобритания🇬🇧": ["Лондон", "Бирмингем", "Манчестер"],
            "🇳🇱Нидерланды🇳🇱": ["Амстердам", "Роттердам", "Гаага"],
            "🇪🇸Испания🇪🇸": ["Мадрид", "Барселона", "Валенсия"],
            "🇱🇹Литва🇱🇹": ["Вильнюс", "Каунас", "Клайпеда"],
            "🇱🇻Латвия🇱🇻": ["Рига", "Даугавпилс", "Лиепая"],
            "🇪🇪Эстония🇪🇪": ["Таллин", "Тарту", "Нарва"]
        };

        function updateCityList(country, cityList) {
            cityList.innerHTML = '';
            if (citiesByCountry[country]) {
                citiesByCountry[country].forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    cityList.appendChild(option);
                });
            }
        }

        fromDropdown.addEventListener('input', function() {
            updateCityList(fromDropdown.value, fromcityList);
        });

        toDropdown.addEventListener('input', function() {
            updateCityList(toDropdown.value, tocityList);
        });
        const countryList = [
    "🇰🇿Казахстан🇰🇿", "🇷🇺Россия🇷🇺", "🇩🇪Германия🇩🇪", "🇺🇦Украина🇺🇦",
    "🇦🇲Армения🇦🇲", "🇹🇷Турция🇹🇷", "🇨🇳Китай🇨🇳", "🇦🇿Азербайджан🇦🇿",
    "🇫🇷Франция🇫🇷", "🇮🇹Италия🇮🇹", "🇺🇿Узбекистан🇺🇿", "🇹🇯Таджикистан🇹🇯",
    "🇰🇬Киргизия🇰🇬", "🇹🇲Туркмения🇹🇲", "🇬🇪Грузия🇬🇪", "🇵🇱Польша🇵🇱",
    "🇧🇾Беларусь🇧🇾", "🇲🇩Молдова🇲🇩", "🇬🇧Великобритания🇬🇧", "🇳🇱Нидерланды🇳🇱",
    "🇪🇸Испания🇪🇸", "🇱🇹Литва🇱🇹", "🇱🇻Латвия🇱🇻", "🇪🇪Эстония🇪🇪"
];

function validateInput(element, list, errorElement, errorMessage) {
    const value = element.value;
    if (!list.includes(value)) {
        errorElement.textContent = errorMessage;
        errorElement.style.display = 'block';
    } else {
        errorElement.style.display = 'none';
    }
}

function validateCityInput(cityElement, countryElement, errorElement, errorMessage) {
    const selectedCountry = countryElement.value;
    const selectedCity = cityElement.value;
    if (selectedCountry && citiesByCountry[selectedCountry] && !citiesByCountry[selectedCountry].includes(selectedCity)) {
        errorElement.textContent = errorMessage;
        errorElement.style.display = 'block';
    } else {
        errorElement.style.display = 'none';
    }
}

document.getElementById('fromDropdown').addEventListener('input', function() {
    validateInput(
        this,
        countryList,
        document.getElementById('fromCountryError'),
        'Неверный ввод'
    );
});

document.getElementById('fromcityInput').addEventListener('input', function() {
    validateCityInput(
        this,
        document.getElementById('fromDropdown'),
        document.getElementById('fromCityError'),
        'Неверный ввод'
    );
});

document.getElementById('toDropdown').addEventListener('input', function() {
    validateInput(
        this,
        countryList,
        document.getElementById('toCountryError'),
        'Неверный ввод'
    );
});

document.getElementById('tocityInput').addEventListener('input', function() {
    validateCityInput(
        this,
        document.getElementById('toDropdown'),
        document.getElementById('toCityError'),
        'Неверный ввод'
    );
});
document.querySelectorAll('.clearable').forEach(input => {
    input.addEventListener('input', function() {
        const value = this.value;
        this.classList.toggle('x', value.length > 0);
    });

    input.addEventListener('mousemove', function(e) {
        const offset = this.offsetWidth - 30;
        this.classList.toggle('onX', this.value.length > 0 && e.clientX > this.getBoundingClientRect().left + offset);
    });

    input.addEventListener('click', function(e) {
        if (this.classList.contains('onX')) {
            e.preventDefault();
            this.value = '';
            this.classList.remove('x', 'onX');
        }
    });
});







    </script>
    
        
        <label for="loadName">Название груза:</label>
        <input type="text" id="loadName" name="load name" required>

        <label for="loadWeight">Вес груза:</label>
        <input type="text" id="loadWeight" name="load weight" inputmode = "decimal" placeholder="в тоннах" required>
        <label for="trailerType">Тип прицепа:</label>   
        <select id="trailerType" name="trailerType">
            <option value="Тент">Тент</option>
            <optgroup label="Тент">
                <option value="Стандарт">Стандарт</option>
                <option value="Мега">Мега</option>
              </optgroup>
            <option value="Реф">Реф</option>
            <option value="Паравоз">Паравоз</option>
            <optgroup label="Паравоз">
              <option value="120м3">120м3</option>
              <option value="125м3">125м3</option>
              <option value="130м3">130м3</option>
              <option value="135м3">135м3</option>
            </optgroup>
        </select>

        <label for="paymentAmount">Ставка:</label>
        <input type="number" inputmode = "decimal" id="paymentAmount" name="payment amount" required placeholder="в долларах">
        
        <label for="paymentType">Тип оплаты:</label>
        <select id="paymentType" name="payment type">
            <option value="Наличными">Наличными</option>
            <option value="Перевод">Перевод</option>
        </select>

        <label for="prepayment">Аванс:</label>
        <input type="number" inputmode = "decimal" id="prepayment" name="prepayment" required placeholder="в процентах">

        <label for="adr">АДР</label>
        <select id="adr" name="adr">
            <option value="Да">Да</option>
            <option value="Нет">Нет</option>
        </select>

        <label for="tir">ТИР</label>
        <select id="tir" name="tir">
            <option value="Да">Да</option>
            <option value="Нет">Нет</option>
        </select>
        
        <label for="carAmount">Количество машин:</label>
        <input type="number" inputmode= "decimal" id="carAmount" name="carAmount" required>

        <label for="loadStatus">Готовность груза:</label>
        <select id="loadStatus" name="loadStatus">
            <option value="Готов к погрузке">Готов к погрузке</option>
            <option value="Не готов">Не готов</option>
        </select>

        <label for="contacts">Контакты для связи:</label>
        <textarea id="contacts" name="contacts" required></textarea>
        
        <label for="otherInfo">Прочая информация:</label>
        <textarea id="otherInfo" name="otherInfo" required></textarea>
    
    <input class="block" type="submit" value="Submit">
</form>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
 document.addEventListener('DOMContentLoaded', function() {
            // Blur inputs on scroll
            document.addEventListener('scroll', function() {
                let inputs = document.querySelectorAll('input, select');
                inputs.forEach(input => {
                    if (document.activeElement === input) {
                        input.blur();
                    }
                });
            });

            // Handle form submission
            const form = document.querySelector('form');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                let object = {};
                formData.forEach((value, key) => {
                    if (!Reflect.has(object, key)) {
                        object[key] = value;
                        return;
                    }
                    if (!Array.isArray(object[key])) {
                        object[key] = [object[key]];
                    }
                    object[key].push(value);
                });

                console.log("Form data object:", object);

                // Send data to Telegram WebApp
                Telegram.WebApp.sendData(JSON.stringify(object));
            });

            // Handle combobox change events
            const fromDropdown = document.getElementById('fromDropdown');
            const toDropdown = document.getElementById('toDropdown');

            fromDropdown.addEventListener('change', function() {
                console.log('From country selected:', fromDropdown.value);
            });

            toDropdown.addEventListener('change', function() {
                console.log('To country selected:', toDropdown.value);
            });
        });
    </script>
    
</body>
</html>
