<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Database Entry Form</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        padding: 20px;
        line-height: 1.6;
    }

    h1 {
        color: #333;
    }

    form {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    label {
        margin-top: 20px;
        margin-bottom: 5px;
        display: block;
        color: #333;
    }

    input[type="text"],
    input[type="number"],
    input[type="email"],
    select,
    textarea {
        width: 100%;
        padding: 12px;
        margin-bottom: 20px;
        border-radius: 5px;
        border: 1px solid #ddd;
        box-sizing: border-box;
    }

    input[type="submit"] {
        width: 100%; /* Easier to tap on mobile */
        background-color: #0056b3;
        color: #ffffff;
        border: none;
        padding: 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
    }

    input[type="submit"]:hover {
        background-color: #004494;
    }

    @media (max-width: 768px) {
        form {
            padding: 15px;
            overflow-anchor: auto;
        }
        input[type="text"],
        input[type="number"],
        textarea {
        font-size: 16px; /* Set font size to at least 16px to prevent zoom */
        }
        .form-container {
        overflow-anchor: auto; 
        }
    }
</style>
</head>
<body>

<h1>Введите сообщение в базу данных</h1>


<form action="" method="post">
    <label for="fromDropdown">Из какой страны</label>
        <select id="fromDropdown" name="from">
            <option value="🇰🇿Казахстан🇰🇿">🇰🇿 Казахстан 🇰🇿</option>
            <option value="🇷🇺Россия🇷🇺">🇷🇺 Россия 🇷🇺</option>
            <option value="🇩🇪Германия🇩🇪">🇩🇪 Германия 🇩🇪</option>
            <option value="🇺🇦Украина🇺🇦">🇺🇦 Украина 🇺🇦</option>
            <option value="🇦🇲Армения🇦🇲">🇦🇲 Армения 🇦🇲</option>
            <option value="🇹🇷Турция🇹🇷">🇹🇷 Турция 🇹🇷</option>
            <option value="🇨🇳Китай🇨🇳">🇨🇳 Китай 🇨🇳</option>
            <option value="🇦🇿Азербайджан🇦🇿">🇦🇿 Азербайджан 🇦🇿</option>
            <option value="🇫🇷Франция🇫🇷">🇫🇷 Франция 🇫🇷</option>
            <option value="🇮🇹Италия🇮🇹">🇮🇹 Италия 🇮🇹</option>
            <option value="🇺🇿Узбекистан🇺🇿">🇺🇿 Узбекистан 🇺🇿</option>
            <option value="🇹🇯Таджикистан🇹🇯">🇹🇯 Таджикистан 🇹🇯</option>
            <option value="🇰🇬Киргизия🇰🇬">🇰🇬 Киргизия 🇰🇬</option>
            <option value="🇹🇲Туркмения🇹🇲">🇹🇲 Туркмения 🇹🇲</option>
            <option value="🇬🇪Грузия🇬🇪">🇬🇪 Грузия 🇬🇪</option>
            <option value="🇵🇱Польша🇵🇱">🇵🇱 Польша 🇵🇱</option>
            <option value="🇧🇾Беларусь🇧🇾">🇧🇾 Беларусь 🇧🇾</option>
            <option value="🇲🇩Молдова🇲🇩">🇲🇩 Молдова 🇲🇩</option>
            
        </select>

        <label for="toDropdown">В какую страну</label>
        <select id="toDropdown" name="to">
            <option value="🇰🇿Казахстан🇰🇿">🇰🇿 Казахстан 🇰🇿</option>
            <option value="🇷🇺Россия🇷🇺">🇷🇺 Россия 🇷🇺</option>
            <option value="🇩🇪Германия🇩🇪">🇩🇪 Германия 🇩🇪</option>
            <option value="🇺🇦Украина🇺🇦">🇺🇦 Украина 🇺🇦</option>
            <option value="🇦🇲Армения🇦🇲">🇦🇲 Армения 🇦🇲</option>
            <option value="🇹🇷Турция🇹🇷">🇹🇷 Турция 🇹🇷</option>
            <option value="🇨🇳Китай🇨🇳">🇨🇳 Китай 🇨🇳</option>
            <option value="🇦🇿Азербайджан🇦🇿">🇦🇿 Азербайджан 🇦🇿</option>
            <option value="🇫🇷Франция🇫🇷">🇫🇷 Франция 🇫🇷</option>
            <option value="🇮🇹Италия🇮🇹">🇮🇹 Италия 🇮🇹</option>
            <option value="🇺🇿Узбекистан🇺🇿">🇺🇿 Узбекистан 🇺🇿</option>
            <option value="🇹🇯Таджикистан🇹🇯">🇹🇯 Таджикистан 🇹🇯</option>
            <option value="🇰🇬Киргизия🇰🇬">🇰🇬 Киргизия 🇰🇬</option>
            <option value="🇹🇲Туркмения🇹🇲">🇹🇲 Туркмения 🇹🇲</option>
            <option value="🇬🇪Грузия🇬🇪">🇬🇪 Грузия 🇬🇪</option>
            <option value="🇵🇱Польша🇵🇱">🇵🇱 Польша 🇵🇱</option>
            <option value="🇧🇾Беларусь🇧🇾">🇧🇾 Беларусь 🇧🇾</option>
            <option value="🇲🇩Молдова🇲🇩">🇲🇩 Молдова 🇲🇩</option>
            
        </select>
        
        <label for="city">Какой город:</label>
        <input type="text" id="city" name="city" required>
        
        <label for="loadName">Название груза:</label>
        <input type="text" id="loadName" name="load name" required>

        <label for="loadWeight">Вес груза:</label>
        <input type="text" id="loadWeight" name="load weight" required>
        <label for="trailerType">Тип прицепа:</label>   
        <select id="trailerType" name="trailerType">
            <option value="Тент">Тент</option>
            <option value="Реф">Реф</option>
        </select>

        <label for="paymentAmount">Ставка:</label>
        <input type="number" inputmode = "decimal" id="paymentAmount" name="payment amount" required placeholder="в долларах">
        
        <label for="paymentType">Тип оплаты:</label>
        <select id="paymentType" name="payment type">
            <option value="Наличными">Наличными</option>
            <option value="Перевод">Перевод</option>
        </select>

        <label for="prepayment">Аванс:</label>
        <input type="number" inputmode = "decimal" id="prepayment" name="prepayment" required placeholder="в процентах">

        <label for="adr">АДР</label>
        <select id="adr" name="adr">
            <option value="Да">Да</option>
            <option value="Нет">Нет</option>
        </select>

        <label for="tir">ТИР</label>
        <select id="tir" name="tir">
            <option value="Да">Да</option>
            <option value="Нет">Нет</option>
        </select>
        
        <label for="carAmount">Количество машин:</label>
        <input type="number" inputmode= "decimal" id="carAmount" name="carAmount" required>

        <label for="loadStatus">Готовность груза:</label>
        <select id="loadStatus" name="loadStatus">
            <option value="Готов к погрузке">Готов к погрузке</option>
            <option value="Не готов">Не готов</option>
        </select>

        <label for="contacts">Контакты для связи:</label>
        <textarea id="contacts" name="contacts" required></textarea>
        
        <label for="otherInfo">Прочая информация:</label>
        <textarea id="otherInfo" name="otherInfo" required></textarea>
    
    <input class="block" type="submit" value="Submit">
</form>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
let isScrolling;

document.addEventListener('scroll', function() {
    window.clearTimeout(isScrolling);

    isScrolling = setTimeout(function() {
        let inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            if (document.activeElement === input) {
                input.blur();
            }
        });
    }, 100); // Delay of 100 milliseconds
});
    
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(form);
            let object = {};
            formData.forEach((value, key) => {
                if (!Reflect.has(object, key)) {
                    object[key] = value;
                    return;
                }
                if (!Array.isArray(object[key])) {
                    object[key] = [object[key]];    
                }
                object[key].push(value);
            });
    
            console.log("Form data object:", object);
    
             Telegram.WebApp.sendData(JSON.stringify(object));
        });
    });
    </script>
    
</body>
</html>
